{"version":3,"sources":["src/flags.js","src/Portal.js","src/Fragment.js","src/h.js","src/patchData.js","src/patchChildren.js","src/patch.js","src/render.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["VNodeFlags","ELEMENT_HTML","ELEMENT_SVG","COMPONENT_STATEFUL_NORAMAL","COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE","COMPONENT_STATEFUL_KEPT_ALIVE","COMPONENT_FUNCTIONAL","TEXT","FRAGMENT","PORTAL","ELEMENT","COMPONENT_STATEFUL","COMPONENT","ChildrenFlags","UNKNOWN_CHILDREN","NO_CHILDREN","SINGLE_VNODE","KEYED_VNODES","NONE_KEYED_VNODES","MULTIPLE_VNODES","Portal","Symbol","Fragment","flags","h","tag","data","children","target","functional","prototype","render","childFlags","Array","isArray","length","normalizeVNodes","_isVNode","createTextVNode","el","newChild","i","child","key","push","text","domPropsRE","patchData","prevValue","nextValue","k","style","hasOwnProperty","className","dynamicClass","addEventListener","slice","test","setAttribute","patchChildren","prevChildFlags","nextChildFlags","prevChildren","nextChildren","container","removeChild","patch","prevVNode","nextVNode","nextFlags","prevFlags","replaceVNode","patchElement","patchComponent","patchText","patchFragment","patchPortal","prevData","nextData","nodeValue","document","querySelector","appendChild","vnode","mount","isSVG","mountElement","mountComponent","mountText","mountFragment","mountPortal","createElementNS","createElement","mountStatefulComponent","mountFunctionalComponent","instance","$props","_update","_mounted","$vnode","parentNode","$el","mounted","createTextNode","placeholder","str","handler","alert","MyComponent","localState","setTimeout","ChildComponent","ParentComponent","childCompVNode","compVNode","console","log","getElementById","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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E,UAAAA,GAAG,IAAInD,YAAY,CAACD,SAAS,CAACZ,CAAD,CAAV,CAAnB;AACC;AACD;;AACD,aAAOgE,GAAG,IAAI,EAAd;AACC,KAVD,MAUO;AACP,UAAIA,IAAG,GAAG,EAAV;;AACA,WAAK,IAAI9D,GAAT,IAAgBU,SAAhB,EAA2B;AAC1B,YAAI,OAAOA,SAAS,CAACV,GAAD,CAAhB,KAA0B,SAA1B,IAAuCU,SAAS,CAACV,GAAD,CAApD,EAA2D;AAC3D8D,UAAAA,IAAG,IAAI9D,GAAG,GAAG,GAAb;AACC,SAFD,MAEO,IAAI,QAAOU,SAAS,CAACV,GAAD,CAAhB,MAA0B,QAA9B,EAAwC;AAC/C8D,UAAAA,IAAG,IAAInD,YAAY,CAACD,SAAS,CAACV,GAAD,CAAV,CAAnB;AACC;AACD;;AACD,aAAO8D,IAAG,IAAI,EAAd;AACC;AACD;;AACD,SAAO,EAAP;AACA;;eAEc;AACZ1E,EAAAA,MAAM,EAANA;AADY;;;;;AC1Pf;;AACA;;AACA;;AACA;;AACA;;;;;;;;AACA,SAAS2E,OAAT,GAAmB;AACjBC,EAAAA,KAAK,CAAC,OAAD,CAAL;AACD,EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["const VNodeFlags = {\r\n  // html标签\r\n  ELEMENT_HTML: 1, // 0000000000000001\r\n  // SVG标签\r\n  ELEMENT_SVG: 1 << 1, // 0000000000000010\r\n  // 普通有状态组件\r\n  COMPONENT_STATEFUL_NORAMAL: 1 << 2, // 0000000000000100\r\n  // 需要被keepAlive的有状态组件\r\n  COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE: 1 << 3, // 0000000000001000\r\n  // 已经被keepAlive的组件\r\n  COMPONENT_STATEFUL_KEPT_ALIVE: 1 << 4, // 0000000000010000\r\n  // 函数式组件\r\n  COMPONENT_FUNCTIONAL: 1 << 5, // 0000000000100000\r\n\r\n  // 纯文本\r\n  TEXT: 1 << 6, // 0000000001000000\r\n  // Fragment\r\n  FRAGMENT: 1 << 7, // 0000000010000000\r\n  // Portal\r\n  PORTAL: 1 << 8 // 0000000100000000\r\n};\r\n// html和svg都是标签元素，可以用ELEMENT表示\r\nVNodeFlags.ELEMENT = // 00000011\r\n  VNodeFlags.ELEMENT_HTML | VNodeFlags.ELEMENT_SVG; // 00000001 // 00000010\r\n\r\n// 普通有状态组件、需要被keepAlive的有状态组件、已经被keepAlive的有状态组件，都是有状态组件，统一用COMPONENT_STATEFUL表示\r\nVNodeFlags.COMPONENT_STATEFUL = // 00011100\r\n  VNodeFlags.COMPONENT_STATEFUL_NORAMAL | // 00000100\r\n  VNodeFlags.COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE | // 00001000\r\n  VNodeFlags.COMPONENT_STATEFUL_KEPT_ALIVE; // 00010000\r\n\r\n// 有状态组件 和 函数式组件都是\"组件, 用COMPONENT表示\r\nVNodeFlags.COMPONENT = // 00111100\r\n  VNodeFlags.COMPONENT_STATEFUL | VNodeFlags.COMPONENT_FUNCTIONAL; // 00011100 // 00100000\r\n\r\n// VNodeFlags.ELEMENT_HTML &             // 00000001\r\n// VNodeFlags.ELEMENT_SVG &          // 00000010\r\n//VNodeFlags.ELEMENT                // 00000011\r\n//  => true\r\n\r\n// children 和 ChildrenFlags\r\n// 子节点\r\n// 总的来说有一下几种\r\n// 1、没有子节点\r\n// 2、只有一个子节点\r\n// 3、多个子节点\r\n//   ·有key\r\n//   ·无key\r\n// 4、不知道子节点情况\r\nconst ChildrenFlags = {\r\n  // 未知的children类型\r\n  UNKNOWN_CHILDREN: 0, // 00000000\r\n  // 没有children\r\n  NO_CHILDREN: 1, // 00000001\r\n  // children是单个VNode\r\n  SINGLE_VNODE: 1 << 1, // 00000010\r\n  // children 是多个拥有key的VNode\r\n  KEYED_VNODES: 1 << 2, // 00000100\r\n  // children 是多个没有key的VNode\r\n  NONE_KEYED_VNODES: 1 << 3 // 00001000\r\n};\r\n// 由于\tChildrenFlags.KEYED_VNODES 和 ChildrenFalgs.NONE_KEYED_VNODES 都属于多个VNode，所以我们可以派生出一个 “多节点” 标识\r\nChildrenFlags.MULTIPLE_VNODES = // 00001100\r\n  ChildrenFlags.KEYED_VNODES | ChildrenFlags.NONE_KEYED_VNODES; // 00000100 // 00001000\r\n// 这样判断一个VNode的子节点是否是多个子节点就变得容易多了：\r\n// someVNode.childFlags & ChildrenFlags.MULTIPLE_VNODES\r\nexport default {\r\n  VNodeFlags,\r\n  ChildrenFlags\r\n};\r\n","export const Portal = Symbol();\r\n","export const Fragment = Symbol();\r\n","import flags from \"./flags\";\r\nimport { Portal } from \"./Portal\";\r\nimport { Fragment } from \"./Fragment\";\r\nconst { VNodeFlags, ChildrenFlags } = flags;\r\n\r\nexport function h(tag, data = null, children = null) {\r\n\tlet flags = null;\r\n\tif (typeof tag === \"string\") {\r\n\t\tflags = tag === \"svg\" ? VNodeFlags.ELEMENT_SVG : VNodeFlags.ELEMENT_HTML;\r\n\t} else if (tag === Fragment) {\r\n\t\tflags = VNodeFlags.FRAGMENT;\r\n\t} else if (tag === Portal) {\r\n\t\tflags = VNodeFlags.PORTAL;\r\n\t\ttag = data && data.target;\r\n\t} else {\r\n\t\t// 兼容vue2的对象式组件\r\n\t\tif (tag !== null && typeof tag === \"object\") {\r\n\t\tflags = tag.functional\r\n\t\t\t? VNodeFlags.COMPONENT_FUNCTIONAL\r\n\t\t\t: VNodeFlags.COMPONENT_STATEFUL_NORAMAL;\r\n\t\t} else if (typeof tag === \"function\") {\r\n\t\t// vue3 的类组件\r\n\t\tflags =\r\n\t\t\ttag.prototype && tag.prototype.render\r\n\t\t\t? VNodeFlags.COMPONENT_STATEFUL_NORAMAL\r\n\t\t\t: VNodeFlags.COMPONENT_FUNCTIONAL;\r\n\t\t}\r\n\t}\r\n\t// 确定childFlags\r\n\tlet childFlags = null;\r\n\tif (Array.isArray(children)) {\r\n\t\tconst { length } = children;\r\n\t\tif (!length) {\r\n\t\tchildFlags = ChildrenFlags.NO_CHILDREN;\r\n\t\t} else if (length === 1) {\r\n\t\tchildFlags = ChildrenFlags.SINGLE_VNODE;\r\n\t\t} else {\r\n\t\t// 多个子节点，且子节点使用key\r\n\t\t// ? 此处多个子节点直接被当做使用了key的子节点，是因为在下面 normalizeVNodes函数里面直接人为添加了key ?\r\n\t\tchildFlags = ChildrenFlags.KEYED_VNODES;\r\n\t\tchildren = normalizeVNodes(children);\r\n\t\t}\r\n\t} else if (children == null) {\r\n\t\tchildFlags = ChildrenFlags.NO_CHILDREN;\r\n\t} else if (children._isVNode) {\r\n\t\t// 单个子节点\r\n\t\tchildFlags = ChildrenFlags.SINGLE_VNODE;\r\n\t} else {\r\n\t\t// 其他情况都作为文本节点处理，即单个子节点，会调用createTextVNode创建纯文本类型的 VNode\r\n\t\tchildFlags = ChildrenFlags.SINGLE_VNODE;\r\n\t\tchildren = createTextVNode(children + \"\");\r\n\t}\r\n\treturn {\r\n\t\t_isVNode: true, // 始终为true\r\n\t\tflags: flags,\r\n\t\ttag: tag,\r\n\t\tdata: data,\r\n\t\tchildren: children,\r\n\t\tchildFlags: childFlags,\r\n\t\tel: null\r\n\t};\r\n}\r\n\r\nfunction normalizeVNodes(children) {\r\n\tconst newChild = [];\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst child = children[i];\r\n\t\tif (child.key == null) {\r\n\t\tchild.key = \"|\" + i;\r\n\t\t}\r\n\t\tnewChild.push(child);\r\n\t}\r\n\t// 返回新的children，此时children的类型就是 ChildrenFlags.KEYED_VNODES\r\n\treturn newChild;\r\n}\r\n\r\nexport function createTextVNode(text) {\r\n\treturn {\r\n\t\t_isVNode: true,\r\n\t\tflags: VNodeFlags.TEXT,\r\n\t\ttag: null,\r\n\t\tdata: null,\r\n\t\t// 纯文本类型的 VNode，其children属性存储的是与之相符的文本内容\r\n\t\tchildren: text,\r\n\t\t// 文本节点没有子节点\r\n\t\tchildFlags: VNodeFlags.NO_CHILDREN\r\n\t};\r\n}\r\n","const domPropsRE = /\\[A-Z]|^(?:value|checked|slected|muted)$/;\r\nexport default function patchData(el, key, prevValue, nextValue) {\r\n\tswitch(key) {\r\n\t\tcase 'style':\r\n\t\t\t// 如果 key 的值是 style，说明是内联样式，逐个将样式规则应用到 el\r\n\t\t\tfor (let k in nextValue) {\r\n\t\t\t\tel.style[k] = nextValue[k]\r\n\t\t\t}\r\n\t\t\t// 遍历旧的 VNodeData ，将不存在于新的 VNodeData 中的样式清除\r\n\t\t\tfor (let k in prevValue) {\r\n\t\t\t\tif (!nextValue || !nextValue.hasOwnProperty(k)) {\r\n\t\t\t\t\tel.style[k] = ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\tcase 'class':\r\n\t\t\tel.className = dynamicClass(nextValue[key])\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\t// 事件处理\r\n\t\t\tif (key[0] === 'o' && key[1] === 'n') {\r\n\t\t\t\t// 移除旧事件\r\n\t\t\t\tif (prevValue) {\r\n\t\t\t\t\tel.addEventListener(key.slice(2), prevValue)\r\n\t\t\t\t}\r\n\t\t\t\t// 添加新事件\r\n\t\t\t\tif (nextValue) {\r\n\t\t\t\t\tel.addEventListener(key.slice(2), nextValue)\r\n\t\t\t\t}\r\n\t\t\t\t// 注：如此一来，所有以 'on' 开头的属性都被判定为事件\r\n\t\t\t} else if (domPropsRE.test(key)) {\r\n\t\t\t\t// 当做 DOM Prop处理\r\n\t\t\t\tel[key] = nextValue\r\n\t\t\t} else {\r\n\t\t\t\t// 当作 Attr 处理\r\n\t\t\t\tel.setAttribute(key, nextValue)\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t}\r\n}","import { patch } from \"./patch\";\r\nimport flags from './flags'\r\nimport { mount } from \"./render\";\r\nconst {ChildrenFlags} = flags\r\n\r\nexport default function patchChildren(\r\n\tprevChildFlags,\r\n\tnextChildFlags,\r\n\tprevChildren,\r\n\tnextChildren,\r\n\tcontainer\r\n) {\r\n\tswitch (prevChildFlags) {\r\n\t\t// 旧的 children 是单个子节点\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\t// 此时，prevChidren 和 nextChildren 都是 VNode 对象\r\n\t\t\t\t\tpatch(prevChildren, nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tcontainer.removeChild(prevChildren.el)\t\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tcontainer.removeChild(prevChildren.el)\r\n\t\t\t\t\tfor (let i = 0; i <  nextChildren.length; i++) {\r\n\t\t\t\t\t\tmount(nextChildren[i], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\t// 旧的 children 没有子节点\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\tmount(nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tfor (let i = 0; i <  nextChildren.length; i++) {\r\n\t\t\t\t\t\tmount(nextChildren[i], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\t// 旧的 children 有多个子节点\r\n\t\tdefault: \r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmount(nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let k = 0; k < nextChildren.length; k++) {\r\n\t\t\t\t\t\tmount(nextChildren[k], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t}\r\n}","import flags  from './flags'\r\nimport {mount} from './render'\r\nimport patchData from './patchData'\r\nimport patchChildren from './patchChildren'\r\n\r\nconst {VNodeFlags, ChildrenFlags} = flags\r\nexport function patch(prevVNode, nextVNode, container) {\r\n\t// 分别拿到新旧 VNode 的类型，即 flags\r\n\tconst nextFlags = nextVNode.flags\r\n\tconst prevFlags = prevVNode.flags\r\n  \r\n\t// 检查新旧 VNode 的类型是否相同，如果类型不同，则直接调用 replaceVNode 函数替换 VNode\r\n\t// 如果新旧 VNode 的类型相同，则根据不同的类型调用不同的比对函数\r\n\tif (prevFlags !== nextFlags) {\r\n\t  replaceVNode(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.ELEMENT) {\r\n\t  patchElement(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.COMPONENT) {\r\n\t  patchComponent(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.TEXT) {\r\n\t  patchText(prevVNode, nextVNode)\r\n\t} else if (nextFlags & VNodeFlags.FRAGMENT) {\r\n\t  patchFragment(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.PORTAL) {\r\n\t  patchPortal(prevVNode, nextVNode)\r\n\t}\r\n}\r\n\r\n// 替换 VNode\r\nfunction replaceVNode(prevVNode, nextVNode, container) {\r\n\t// 将旧的 VNode 所渲染的 DOM 从容器中移除\r\n\tcontainer.removeChild(prevVNode.el)\r\n\t// 再把新的 VNode 挂载到容器上\r\n\tmount(nextVNode, container)\r\n}\r\n\r\nfunction patchElement(prevVNode, nextVNode, container) {\r\n\t// 如果新的 VNode 描述的是不同的标签，则调用 replaceVNode 函数，使用新的 VNode 替换旧的 VNode\r\n\tif (prevVNode.tag !== nextVNode.tag) {\r\n\t\treplaceVNode(prevVNode, nextVNode, container)\r\n\t\treturn\r\n\t}\r\n\t// 拿到 el 元素，注意这时要让 nextVNode.el 也引用该元素 \r\n\tconst el = (nextVNode.el = prevVNode.el)\r\n\t// 拿到新旧 VNodeData\r\n\tconst prevData = prevVNode.data\r\n\tconst nextData = nextVNode.data\r\n\r\n\tif (nextData) {\r\n\t\t// 遍历新的 VNodeData ，将旧值和新值传递给 patchData函数\r\n\t\tfor (let key in nextData) {\r\n\t\t\tconst prevValue = prevData[key]\r\n\t\t\tconst nextValue = nextData[key]\r\n\t\t\tpatchData(el, key, prevValue, nextValue)\r\n\t\t}\r\n\t}\r\n\r\n\tif (prevData) {\r\n\t\t// 遍历旧的 VNodeData，将不存在与新的 VNodeData 中的数据移除\r\n\t\tfor (let key in prevData) {\r\n\t\t\tconst prevValue = prevData[key]\r\n\t\t\tif (prevValue && !nextData.hasOwnProperty(key)) {\r\n\t\t\t\t// 第四个参数为null代表移除数据\r\n\t\t\t\tpatchData(el, key, prevValue, null)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 调用 patchChildren 函数递归更新子节点\r\n\tpatchChildren(\r\n\t\tprevVNode.childFlags, // 旧的 VNode 子节点类型\r\n\t\tnextVNode.childFlags, // 新的 VNode 子节点类型\r\n\t\tprevVNode.children,   // 旧的 VNode 子节点\r\n\t\tnextVNode.children,   // 新的 VNode 子节点\r\n\t\tel                    // 当前标签元素，即这些子节点的父节点\r\n\t)\r\n}\r\n\r\n// patchText\r\nfunction patchText(prevVNode, nextVNode) {\r\n\t// 拿到文本元素el, 同时让 nextVNode.el 指向该文本元素\r\n\tconst el = (nextVNode.el = prevVNode.el)\r\n\t// 只有当新旧文本内容不一致时才有必要更新\r\n\tif (nextVNode.children !== prevVNode.children) {\r\n\t\tel.nodeValue = nextVNode.children\r\n\t}\r\n}\r\n\r\nfunction patchFragment(prevVNode, nextVNode, container) {\r\n\t// 直接调用 patchChildren 函数更新 新旧节点的子节点即可\r\n\tpatchChildren(\r\n\t\tprevVNode.childFlags, \r\n\t\tnextVNode.childFlags,\r\n\t\tprevVNode.children,\r\n\t\tnextVNode.children,\r\n\t\tcontainer\r\n\t)\r\n\r\n\t// 如上高亮代码所示，我们通过检查新的片段的 children 类型，如果新的片段的 children 类型是单个子节点，则意味着其 vnode.children 属性的值就是 VNode 对象，\r\n\t// 所以直接将 nextVNode.children.el 赋值给 nextVNode.el 即可。如果新的片段没有子节点，我们知道对于没有子节点的片段我们会使用一个空的文本节点占位，\r\n\t// 而 prevVNode.el 属性引用的就是该空文本节点，所以我们直接通过旧片段的 prevVNode.el 拿到该空文本元素并赋值给新片段的 nextVNode.el 即可。\r\n\t// 如果新的片段的类型是多个子节点，则 nextVNode.children 是一个 VNode 数组，我们会让新片段的 nextVNode.el 属性引用数组中的第一个元素。\r\n\t// 实际上这段逻辑与我们在 mountFragment 函数中所实现的逻辑是一致的。\r\n\tswitch (nextVNode.childFlags) {\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tnextVNode.el = nextVNode.children.el\r\n\t\t\tbreak\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\tnextVNode.el = prevVNode.el\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tnextVNode.el = nextVNode.children[0].el\r\n\t}\r\n}\r\n\r\n// 更新Protal\r\nfunction patchPortal(prevVNode, nextVNode) {\r\n\tpatchChildren(\r\n\t\tprevVNode.childFlags,\r\n\t\tnextVNode.childFlags,\r\n\t\tprevVNode.children,\r\n\t\tnextVNode.children,\r\n\t\tprevVNode.tag  // 注意容器元素是旧的container\r\n\t)\r\n\r\n\t// 让 nextVNode.el 指向 prevVNode.el\r\n\tnextVNode.el = prevVNode.el\r\n\r\n\tif (nextVNode.tag !== prevVNode.tag) {\r\n\t\tconst container = typeof nextVNode.el === 'string' ? document.querySelector(nextVNode.tag) : nextVNode.tag\r\n\t\tswitch (nextVNode.childFlags) {\r\n\t\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\t\tcontainer.appendChild(nextVNode.children.el)\r\n\t\t\t\tbreak\r\n\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tfor (let i = 0; i < nextVNode.children.length; i++) {\r\n\t\t\t\t\tcontainer.appendChild(nextVNode.children[i].el)\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import flags from \"./flags\";\r\nimport { patch } from \"./patch\";\r\nconst { VNodeFlags, ChildrenFlags } = flags;\r\nimport { createTextVNode } from './h'\r\n\r\nexport function render(vnode, container) {\r\n  const prevVNode = container.vnode;\r\n  if (prevVNode == null) {\r\n    if (vnode) {\r\n      // 没有旧的 VNode，只有新的 VNode。使用 `mount` 函数挂载全新的 VNode\r\n      mount(vnode, container);\r\n      // 将新的 VNode 添加到 container.vnode 属性下，这样下一次渲染时旧的 VNode就存在了\r\n      container.vnode = vnode;\r\n    }\r\n  } else {\r\n    if (vnode) {\r\n      // 有旧的 VNode，也有新的 VNode。则调用 `patch` 函数打补丁\r\n      patch(prevVNode, vnode, container);\r\n      // 更新 container.vnode\r\n      container.vnode = vnode;\r\n    } else {\r\n      // 有旧的 VNode 但是没有新的 VNode，这说明应该移除 DOM,在浏览器中可以使用 removeChild函数。\r\n      container.removeChild(prevVNode.el);\r\n      container.vnode = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport function mount(vnode, container, isSVG) {\r\n  const { flags } = vnode;\r\n  if (flags & VNodeFlags.ELEMENT_HTML) {\r\n    // 挂载普通标签\r\n    mountElement(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.COMPONENT) {\r\n    // 挂载组件\r\n    mountComponent(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.TEXT) {\r\n    // 挂载存文本\r\n    mountText(vnode, container);\r\n  } else if (flags & VNodeFlags.FRAGMENT) {\r\n    // 挂载Fragment\r\n    mountFragment(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.PORTAL) {\r\n    // 挂载 Portal\r\n    mountPortal(vnode, container, isSVG);\r\n  }\r\n}\r\n\r\n// 处理VNodeData中除 class 和 style 之外的全部数据，当然也要排除 VNodeData中的target属性，因为它只适用于 Portal\r\nconst domPropsRE = /\\[A-Z]|^(?:value|checked|slected|muted)$/;\r\n\r\nfunction mountElement(vnode, container, isSVG) {\r\n  // 注：运算符优先级  逻辑或 5 (||)从左到右  按位与 9(&) 从左到右\r\n\r\n  // 4、处理SVG标签\r\n  isSVG = isSVG || vnode.flags & VNodeFlags.ELEMENT_SVG;\r\n  const el = isSVG\r\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", vnode.tag)\r\n    : document.createElement(vnode.tag);\r\n  vnode.el = el; // 1、VNode渲染成真实DOM之后，引用真实DOM\r\n  // 拿到 VNodeData\r\n  const data = vnode.data;\r\n  if (data) {\r\n    // 如果data存在，则遍历   2、将VNodeData应用到真实DOM元素上\r\n    for (let key in data) {\r\n      // key可能是class、style、on等等\r\n      switch (key) {\r\n        case \"style\":\r\n          // 如果 key 的值是 style，说明是内联样式，逐个将样式规则应用到 el\r\n          for (let k in data.style) {\r\n            el.style[k] = data.style[k];\r\n          }\r\n          break;\r\n        case \"class\":\r\n          el.className = dynamicClass(data[key]);\r\n          break;\r\n        default:\r\n          // 事件处理\r\n          if (key[0] === \"o\" && key[1] === \"n\") {\r\n            el.addEventListener(key.slice(2), data[key]);\r\n            // 注：如此一来，所有以 'on' 开头的属性都被判定为事件\r\n          } else if (domPropsRE.test(key)) {\r\n            // 当做 DOM Prop处理\r\n            el[key] = data[key];\r\n          } else {\r\n            // 当作 Attr 处理\r\n            el.setAttribute(key, data[key]);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 3、继续挂载子节点\r\n  // 拿到children 和 childFlags\r\n  const childFlags = vnode.childFlags;\r\n  const children = vnode.children;\r\n  // 检测如果没有子节点则无需递归挂载\r\n  if (childFlags !== ChildrenFlags.NO_CHILDREN) {\r\n    if (childFlags & ChildrenFlags.SINGLE_VNODE) {\r\n      // 单个子节点则调用mount挂载\r\n      mount(children, el, isSVG); // 把isSvg传递下去，方便后续判断渲染svg里面circle等元素tag不等于svg时渲染svg标签\r\n    } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\r\n      // 如果是多个子节点，则遍历并调用 mount 函数挂载\r\n      for (let i = 0; i < children.length; i++) {\r\n        mount(children[i], el, isSVG);\r\n      }\r\n    }\r\n  }\r\n  // 处理svg标签\r\n  container.appendChild(el); //\r\n}\r\n\r\n// 挂载组件\r\nfunction mountComponent(vnode, container, isSVG) {\r\n\tif (vnode.flags & VNodeFlags.COMPONENT_STATEFUL) {\r\n\t\tmountStatefulComponent(vnode, container, isSVG)\r\n\t} else {\r\n\t\tmountFunctionalComponent(vnode, container, isSVG)\r\n\t}\r\n}\r\n// 挂载有状态组件\r\nfunction mountStatefulComponent(vnode, container, isSVG) {\r\n\t// 1、创建组件实例\r\n\tconst instance = new vnode.tag\r\n\r\n\t// 初始化 props\r\n\tinstance.$props = vnode.data\r\n\r\n\tinstance._update = function() {\r\n\t\t// 如果instance_mounted为真，说明组件已经挂载，应该执行更新操作\r\n\t\tif (instance._mounted) {\r\n\t\t\t// 1、拿到旧的VNode\r\n\t\t\tconst prevVNode = instance.$vnode\r\n\t\t\t// 2、重新渲染VNode\r\n\t\t\tconst nextVNode = (instance.$vnode = instance.render())\r\n\t\t\t// 3、patch更新\r\n\t\t\tpatch(prevVNode, nextVNode, prevVNode.el.parentNode)\r\n\t\t\t// 4、更新 vnode.el 和 $el\r\n\t\t\tinstance.$el = vnode.el = instance.$vnode.el\r\n\t\t} else {\r\n\t\t\t// 1、渲染 Vnode\r\n\t\t\tinstance.$vnode = instance.render()\r\n\t\t\t// 2、mount挂载\r\n\t\t\tmount(instance.$vnode, container, isSVG)\r\n\t\t\t// 3、组件已挂载的标识\r\n\t\t\tinstance._mounted = true\r\n\t\t\t// 4、让组件实例的 $el 属性和 vnode.el 属性的值引用组件的根DOM元素\r\n\t\t\tinstance.$el = vnode.el = instance.$vnode.el\r\n\t\t\t// 5、调用 mounted 钩子\r\n\t\t\tinstance.mounted && instance.mounted()\r\n\t\t}\r\n\t}\r\n\tinstance._update()\r\n}\r\n\r\n// 挂载函数式组件\r\nfunction mountFunctionalComponent(vnode, container, isSVG) {\r\n\t// 获取vnode\r\n\tconst $vnode = vnode.tag()\r\n\t// 挂载\r\n\tmount($vnode, container, isSVG)\r\n\t// el元素引用该组件的根元素\r\n\tvnode.el = $vnode.el\r\n}\r\n\r\n// 挂载纯文本\r\nfunction mountText(vnode, container){\r\n\tconst el = document.createTextNode(vnode.children)\r\n\tvnode.el = el\r\n\tcontainer.appendChild(el)\r\n}\r\n\r\n// 挂载Fragment\r\nfunction mountFragment(vnode, container, isSVG) {\r\n\t// 拿到children 和 childFlags\r\n\tconst {children, childFlags} = vnode\r\n\tswitch (childFlags) {\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tmount(children, container, isSVG)\r\n\t\t\tvnode.el = children.el\r\n\t\t\tbreak\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t// 没有子节点，等价于挂载空片段，会创建一个空的文本节点占位\r\n\t\t\tconst placeholder = createTextVNode('')\r\n\t\t\tmountText(placeholder, container)\r\n\t\t\tvnode.el = placeholder.el\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\t// 多个子节点，遍历挂载\r\n\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\tmount(children[i], container, isSVG)\r\n\t\t\t}\r\n\t\t\tvnode.el = children[0].el\r\n\t\t\tbreak\r\n\t}\r\n}\r\n\r\n// 挂载 Portal\r\nfunction mountPortal(vnode, container, isSVG) {\r\n\tconst {tag, children, childFlags} = vnode\r\n\t// 获取挂载点\r\n\tconst target = typeof tag === 'string' ? document.querySelector(tag) : tag\r\n\tif (childFlags & ChildrenFlags.SINGLE_VNODE) {\r\n\t\t// 将children挂载到target上，而非container\r\n\t\tmount(children, target)\r\n\t} else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\r\n\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\tmount(children[i], target)\r\n\t\t}\r\n\t}\r\n\t// 占位的空文本节点\r\n\tconst placeholder = createTextVNode('')\r\n\t// 将该节点挂载到 container 中\r\n\tmountText(placeholder, container, null)\r\n\t// el属性引用该节点\r\n\tvnode.el = placeholder.el\r\n\r\n}\r\n\r\nfunction dynamicClass(className) {\r\n\tif (typeof className === \"string\") {\r\n\t\treturn className;\r\n\t}\r\n\tif (typeof className === \"object\") {\r\n\t\tif (Array.isArray(className)) {\r\n\t\tlet str = \"\";\r\n\t\tfor (let i = 0; i < className.length; i++) {\r\n\t\t\tif (typeof className[i] === \"string\") {\r\n\t\t\tstr += className[i] + \" \";\r\n\t\t\t} else if (typeof className[i] === \"object\") {\r\n\t\t\tstr += dynamicClass(className[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str || \"\";\r\n\t\t} else {\r\n\t\tlet str = \"\";\r\n\t\tfor (let key in className) {\r\n\t\t\tif (typeof className[key] === \"boolean\" && className[key]) {\r\n\t\t\tstr += key + \" \";\r\n\t\t\t} else if (typeof className[key] === \"object\") {\r\n\t\t\tstr += dynamicClass(className[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str || \"\";\r\n\t\t}\r\n\t}\r\n\treturn \"\";\r\n}\r\n\r\nexport default {\r\n  \trender\r\n};\r\n","import \"./styles.css\";\r\nimport { h } from \"./h\";\r\nimport { render } from \"./render\";\r\nimport { Fragment } from './Fragment'\r\nimport { Portal } from './Portal'\r\nfunction handler() {\r\n  alert(\"click\");\r\n}\r\n\r\n// const elementVnode = h(\r\n// \t\"div\", \r\n// \t{\r\n//   \t\tstyle: {\r\n//     \t\twidth: \"100px\",\r\n//     \t\theight: \"100px\",\r\n//     \t\tbackgroundColor: \"red\"\r\n//   \t\t},\r\n//   \t\t// 点击事件\r\n//   \t\tonclick: handler,\r\n// \t},\r\n\t// h(\r\n\t// \tFragment, null, \r\n\t// \t[\r\n\t// \t\th('h1', {\r\n\t// \t\t\tstyle: {\r\n\t// \t\t\t\tfontSize: '12px',\r\n\t// \t\t\t\tcolor: 'aqua'\r\n\t// \t\t\t}\r\n\t// \t\t}, '我是标题1......'),\r\n\t// \t\th('h2', {\r\n\t// \t\t\tstyle: {\r\n\t// \t\t\t\tfontSize: '20px',\r\n\t// \t\t\t\tcolor: '#6cf',\r\n\t// \t\t\t\tfontStyle: 'itatic'\r\n\t// \t\t\t}\r\n\t// \t\t}, '我是标题2......')\r\n\t// \t]\r\n\t// )\r\n// );\r\n// Portal\r\n// const elementVnode = h(\r\n// \t'div',\r\n// \t{\r\n// \t\tstyle: {\r\n// \t\t\twidth: '100px',\r\n// \t\t\theight: '100px',\r\n// \t\t\tbackgroundColor: 'aqua'\r\n// \t\t},\r\n// \t\tonclick: handler\r\n// \t},\r\n// \th(\r\n// \tPortal, { target: '#portal-box' }, \r\n// \t[\r\n// \t\th('span', null, '我是标题1......'),\r\n// \t\th('span', null, '我是标题2......')\r\n// \t])\r\n// )\r\n\r\n// 有状态组件\r\n// class MyComponent{\r\n// \trender(){\r\n// \t\treturn h(\r\n// \t\t\t'div',\r\n// \t\t\t{\r\n// \t\t\t\tstyle: {\r\n// \t\t\t\t\tbackground: 'green'\r\n// \t\t\t\t}\r\n// \t\t\t},\r\n// \t\t\t[\r\n// \t\t\t\th('span', null, '我是组件标题1·······'),\r\n// \t\t\t\th('span', null, '我是组件标题2······')\r\n// \t\t\t]\r\n// \t\t)\r\n// \t}\r\n// }\r\n// 函数式组件\r\n// function MyFunctionalComponent(){\r\n// \treturn h(\r\n// \t\t'div',\r\n// \t\t{\r\n// \t\t\tstyle: {\r\n// \t\t\t\tbackground: 'aqua',\r\n// \t\t\t\theight: '100px',\r\n// \t\t\t\twidth: '100px',\r\n// \t\t\t\tborderRadius: '50px',\r\n// \t\t\t\ttextAlign: 'center'\r\n// \t\t\t}\r\n// \t\t},\r\n// \t\t[\r\n// \t\t\th('span', null, '我是组件标题1······'),\r\n// \t\t\th('span', null, '我是组件标题2······')\r\n// \t\t]\r\n// \t)\r\n// }\r\n// const compVnode = h(MyComponent)\r\n\r\n// const funcVnode = h(MyFunctionalComponent)\r\n\r\n// render(funcVnode, document.getElementById(\"app\") || document.body)\r\n// 旧的 VNode\r\n// const prevVNode = h('div', {\r\n//   style: {\r\n//     width: '100px',\r\n//     height: '100px',\r\n//     backgroundColor: 'red'\r\n//   },\r\n//   onclick: handler,\r\n//   data: '1234'\r\n// },\r\n// h('p', {\r\n// \tstyle: {\r\n// \t  height: '50px',\r\n// \t  width: '50px'\r\n// \t}\r\n// })\r\n// )\r\n\r\n// 新的 VNode\r\n// const nextVNode = h('div', {\r\n//   style: {\r\n//     width: '100px',\r\n//     height: '100px',\r\n//     border: '1px solid green'\r\n//   },\r\n//   data: '456'\r\n// },\r\n// h('p', {\r\n// \tstyle: {\r\n// \t  height: '50px',\r\n// \t  width: '50px',\r\n// \t  background: 'aqua'\r\n// \t}\r\n//   })\r\n// )\r\n\r\n// 旧的 VNode 一个子节点\r\n// const prevVNode = h('div', null, h('p', null, '只有一个子节点'))\r\n\r\n// 新的 VNode 多个子节点\r\n// const nextVNode = h('div', null, [\r\n//   h('p', null, '子节点 1'),\r\n//   h('p', null, '子节点 2')\r\n// ])\r\n\r\n\r\n// patchText\r\n// const prevVNode = h('p', null, '旧文本')\r\n\r\n// 新的 VNode\r\n// const nextVNode = h('p', null, '新文本')\r\n\r\n\r\n\r\n/**** patch fragment ****/\r\n// 旧的 VNode\r\n// const prevVNode = h(Fragment, null, [\r\n// \th('p', null, '旧片段子节点 1'),\r\n// \th('p', null, '旧片段子节点 2')\r\n// ])\r\n  \r\n// 新的 VNode\r\n// const nextVNode = h(Fragment, null, [\r\n// \th('p', null, '新片段子节点 1'),\r\n// \th('p', null, '新片段子节点 2')\r\n// ])\r\n\r\n\r\n/**** patch Portal ****/\r\n\r\n// const prevVNode = h(\r\n// \tPortal,\r\n// \t{\r\n// \t\ttarget: '#old-container'\r\n// \t},\r\n// \th('p', null, '旧的Portal')\r\n// )\r\n\r\n// const nextVNode = h(\r\n// \tPortal,\r\n// \t{\r\n// \t\ttarget: '#new-container'\r\n// \t},\r\n// \th('p', null, '新的Portal')\r\n// )\r\n\r\n// render(prevVNode, document.getElementById('app'))\r\n\r\n// // 2秒后更新\r\n// setTimeout(() => {\r\n//   render(nextVNode, document.getElementById('app'))\r\n// }, 2000)\r\n\r\n\r\n// 组件类\r\nclass MyComponent {\r\n\tconstructor(){\r\n\t\tthis.localState = 'one'\r\n\t}\r\n\t// localState = 'one'\r\n  \r\n\tmounted() {\r\n\t  \tsetTimeout(() => {\r\n\t\t\tthis.localState = 'two'\r\n\t\t\tthis._update()\r\n\t  \t}, 2000)\r\n\t}\r\n  \r\n\trender() {\r\n\t  \treturn h('div', null, this.localState)\r\n\t}\r\n  }\r\n// 有状态组件 VNode\r\n// const compVNode = h(MyComponent)\r\n\r\n\r\n/****    $props   ****/\r\nclass ChildComponent{\r\n\trender() {\r\n\t\t// 通过 this.$props.text访问外部数据\r\n\t\treturn h('div', null, this.$props.text)\r\n\t}\r\n}\r\nclass ParentComponent{\r\n\t// localState = 'one'\r\n\tconstructor(){\r\n\t\tthis.localState = 'one'\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst childCompVNode = h(ChildComponent, {\r\n\t\t\ttext: this.localState\r\n\t\t})\r\n\t\treturn childCompVNode\r\n\t}\r\n}\r\n\r\nconst compVNode = h(ParentComponent)\r\nconsole.log(compVNode)\r\nreturn\r\nrender(compVNode, document.getElementById('app'))\r\n\r\n\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}