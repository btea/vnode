{"version":3,"sources":["src/flags.js","src/Portal.js","src/Fragment.js","src/h.js","src/patchData.js","src/patchChildren.js","src/patch.js","src/render.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["VNodeFlags","ELEMENT_HTML","ELEMENT_SVG","COMPONENT_STATEFUL_NORAMAL","COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE","COMPONENT_STATEFUL_KEPT_ALIVE","COMPONENT_FUNCTIONAL","TEXT","FRAGMENT","PORTAL","ELEMENT","COMPONENT_STATEFUL","COMPONENT","ChildrenFlags","UNKNOWN_CHILDREN","NO_CHILDREN","SINGLE_VNODE","KEYED_VNODES","NONE_KEYED_VNODES","MULTIPLE_VNODES","Portal","Symbol","Fragment","flags","h","tag","data","children","target","functional","prototype","render","childFlags","Array","isArray","length","normalizeVNodes","_isVNode","createTextVNode","el","newChild","i","child","key","push","text","domPropsRE","patchData","prevValue","nextValue","k","style","hasOwnProperty","className","dynamicClass","addEventListener","slice","test","setAttribute","patchChildren","prevChildFlags","nextChildFlags","prevChildren","nextChildren","container","removeChild","patch","prevVNode","nextVNode","nextFlags","prevFlags","replaceVNode","patchElement","patchComponent","patchText","patchFragment","patchPortal","prevData","nextData","nodeValue","vnode","mount","isSVG","mountElement","mountComponent","mountText","mountFragment","mountPortal","document","createElementNS","createElement","appendChild","mountStatefulComponent","mountFunctionalComponent","instance","$vnode","$el","createTextNode","placeholder","querySelector","str","handler","alert","MyComponent","background","MyFunctionalComponent","height","width","borderRadius","textAlign","compVnode","funcVnode","getElementById","setTimeout","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["const VNodeFlags = {\r\n  // html标签\r\n  ELEMENT_HTML: 1, // 0000000000000001\r\n  // SVG标签\r\n  ELEMENT_SVG: 1 << 1, // 0000000000000010\r\n  // 普通有状态组件\r\n  COMPONENT_STATEFUL_NORAMAL: 1 << 2, // 0000000000000100\r\n  // 需要被keepAlive的有状态组件\r\n  COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE: 1 << 3, // 0000000000001000\r\n  // 已经被keepAlive的组件\r\n  COMPONENT_STATEFUL_KEPT_ALIVE: 1 << 4, // 0000000000010000\r\n  // 函数式组件\r\n  COMPONENT_FUNCTIONAL: 1 << 5, // 0000000000100000\r\n\r\n  // 纯文本\r\n  TEXT: 1 << 6, // 0000000001000000\r\n  // Fragment\r\n  FRAGMENT: 1 << 7, // 0000000010000000\r\n  // Portal\r\n  PORTAL: 1 << 8 // 0000000100000000\r\n};\r\n// html和svg都是标签元素，可以用ELEMENT表示\r\nVNodeFlags.ELEMENT = // 00000011\r\n  VNodeFlags.ELEMENT_HTML | VNodeFlags.ELEMENT_SVG; // 00000001 // 00000010\r\n\r\n// 普通有状态组件、需要被keepAlive的有状态组件、已经被keepAlive的有状态组件，都是有状态组件，统一用COMPONENT_STATEFUL表示\r\nVNodeFlags.COMPONENT_STATEFUL = // 00011100\r\n  VNodeFlags.COMPONENT_STATEFUL_NORAMAL | // 00000100\r\n  VNodeFlags.COMPONENT_STATEFUL_SHOULD_KEEP_ALIVE | // 00001000\r\n  VNodeFlags.COMPONENT_STATEFUL_KEPT_ALIVE; // 00010000\r\n\r\n// 有状态组件 和 函数式组件都是\"组件, 用COMPONENT表示\r\nVNodeFlags.COMPONENT = // 00111100\r\n  VNodeFlags.COMPONENT_STATEFUL | VNodeFlags.COMPONENT_FUNCTIONAL; // 00011100 // 00100000\r\n\r\n// VNodeFlags.ELEMENT_HTML &             // 00000001\r\n// VNodeFlags.ELEMENT_SVG &          // 00000010\r\n//VNodeFlags.ELEMENT                // 00000011\r\n//  => true\r\n\r\n// children 和 ChildrenFlags\r\n// 子节点\r\n// 总的来说有一下几种\r\n// 1、没有子节点\r\n// 2、只有一个子节点\r\n// 3、多个子节点\r\n//   ·有key\r\n//   ·无key\r\n// 4、不知道子节点情况\r\nconst ChildrenFlags = {\r\n  // 未知的children类型\r\n  UNKNOWN_CHILDREN: 0, // 00000000\r\n  // 没有children\r\n  NO_CHILDREN: 1, // 00000001\r\n  // children是单个VNode\r\n  SINGLE_VNODE: 1 << 1, // 00000010\r\n  // children 是多个拥有key的VNode\r\n  KEYED_VNODES: 1 << 2, // 00000100\r\n  // children 是多个没有key的VNode\r\n  NONE_KEYED_VNODES: 1 << 3 // 00001000\r\n};\r\n// 由于\tChildrenFlags.KEYED_VNODES 和 ChildrenFalgs.NONE_KEYED_VNODES 都属于多个VNode，所以我们可以派生出一个 “多节点” 标识\r\nChildrenFlags.MULTIPLE_VNODES = // 00001100\r\n  ChildrenFlags.KEYED_VNODES | ChildrenFlags.NONE_KEYED_VNODES; // 00000100 // 00001000\r\n// 这样判断一个VNode的子节点是否是多个子节点就变得容易多了：\r\n// someVNode.childFlags & ChildrenFlags.MULTIPLE_VNODES\r\nexport default {\r\n  VNodeFlags,\r\n  ChildrenFlags\r\n};\r\n","export const Portal = Symbol();\r\n","export const Fragment = Symbol();\r\n","import flags from \"./flags\";\r\nimport { Portal } from \"./Portal\";\r\nimport { Fragment } from \"./Fragment\";\r\nconst { VNodeFlags, ChildrenFlags } = flags;\r\n\r\nexport function h(tag, data = null, children = null) {\r\n  let flags = null;\r\n  if (typeof tag === \"string\") {\r\n    flags = tag === \"svg\" ? VNodeFlags.ELEMENT_SVG : VNodeFlags.ELEMENT_HTML;\r\n  } else if (tag === Fragment) {\r\n    flags = VNodeFlags.FRAGMENT;\r\n  } else if (tag === Portal) {\r\n    flags = VNodeFlags.PORTAL;\r\n    tag = data && data.target;\r\n  } else {\r\n    // 兼容vue2的对象式组件\r\n    if (tag !== null && typeof tag === \"object\") {\r\n      flags = tag.functional\r\n        ? VNodeFlags.COMPONENT_FUNCTIONAL\r\n        : VNodeFlags.COMPONENT_STATEFUL_NORAMAL;\r\n    } else if (typeof tag === \"function\") {\r\n      // vue3 的类组件\r\n      flags =\r\n        tag.prototype && tag.prototype.render\r\n          ? VNodeFlags.COMPONENT_STATEFUL_NORAMAL\r\n          : VNodeFlags.COMPONENT_FUNCTIONAL;\r\n    }\r\n  }\r\n  // 确定childFlags\r\n  let childFlags = null;\r\n  if (Array.isArray(children)) {\r\n    const { length } = children;\r\n    if (!length) {\r\n      childFlags = ChildrenFlags.NO_CHILDREN;\r\n    } else if (length === 1) {\r\n      childFlags = ChildrenFlags.SINGLE_VNODE;\r\n    } else {\r\n      // 多个子节点，且子节点使用key\r\n      // ? 此处多个子节点直接被当做使用了key的子节点，是因为在下面 normalizeVNodes函数里面直接人为添加了key ?\r\n      childFlags = ChildrenFlags.KEYED_VNODES;\r\n      children = normalizeVNodes(children);\r\n    }\r\n  } else if (children == null) {\r\n    childFlags = ChildrenFlags.NO_CHILDREN;\r\n  } else if (children._isVNode) {\r\n    // 单个子节点\r\n    childFlags = ChildrenFlags.SINGLE_VNODE;\r\n  } else {\r\n    // 其他情况都作为文本节点处理，即单个子节点，会调用createTextVNode创建纯文本类型的 VNode\r\n    childFlags = ChildrenFlags.SINGLE_VNODE;\r\n    children = createTextVNode(children + \"\");\r\n  }\r\n  return {\r\n    _isVNode: true, // 始终为true\r\n    flags: flags,\r\n    tag: tag,\r\n    data: data,\r\n    children: children,\r\n    childFlags: childFlags,\r\n    el: null\r\n  };\r\n}\r\n\r\nfunction normalizeVNodes(children) {\r\n  const newChild = [];\r\n  for (let i = 0; i < children.length; i++) {\r\n    const child = children[i];\r\n    if (child.key == null) {\r\n      child.key = \"|\" + i;\r\n    }\r\n    newChild.push(child);\r\n  }\r\n  // 返回新的children，此时children的类型就是 ChildrenFlags.KEYED_VNODES\r\n  return newChild;\r\n}\r\n\r\nexport function createTextVNode(text) {\r\n  return {\r\n    _isVNode: true,\r\n    flags: VNodeFlags.TEXT,\r\n    tag: null,\r\n    data: null,\r\n    // 纯文本类型的 VNode，其children属性存储的是与之相符的文本内容\r\n    children: text,\r\n    // 文本节点没有子节点\r\n    childFlags: VNodeFlags.NO_CHILDREN,\r\n    el: null\r\n  };\r\n}\r\n","const domPropsRE = /\\[A-Z]|^(?:value|checked|slected|muted)$/;\r\nexport default function patchData(el, key, prevValue, nextValue) {\r\n\tswitch(key) {\r\n\t\tcase 'style':\r\n\t\t\t// 如果 key 的值是 style，说明是内联样式，逐个将样式规则应用到 el\r\n\t\t\tfor (let k in nextValue) {\r\n\t\t\t\tel.style[k] = nextValue[k]\r\n\t\t\t}\r\n\t\t\t// 遍历旧的 VNodeData ，将不存在于新的 VNodeData 中的样式清除\r\n\t\t\tfor (let k in prevValue) {\r\n\t\t\t\tif (!nextValue || !nextValue.hasOwnProperty(k)) {\r\n\t\t\t\t\tel.style[k] = ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\tcase 'class':\r\n\t\t\tel.className = dynamicClass(nextValue[key])\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\t// 事件处理\r\n\t\t\tif (key[0] === 'o' && key[1] === 'n') {\r\n\t\t\t\t// 移除旧事件\r\n\t\t\t\tif (prevValue) {\r\n\t\t\t\t\tel.addEventListener(key.slice(2), prevValue)\r\n\t\t\t\t}\r\n\t\t\t\t// 添加新事件\r\n\t\t\t\tif (nextValue) {\r\n\t\t\t\t\tel.addEventListener(key.slice(2), nextValue)\r\n\t\t\t\t}\r\n\t\t\t\t// 注：如此一来，所有以 'on' 开头的属性都被判定为事件\r\n\t\t\t} else if (domPropsRE.test(key)) {\r\n\t\t\t\t// 当做 DOM Prop处理\r\n\t\t\t\tel[key] = nextValue\r\n\t\t\t} else {\r\n\t\t\t\t// 当作 Attr 处理\r\n\t\t\t\tel.setAttribute(key, nextValue)\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t}\r\n}","import { patch } from \"./patch\";\r\nimport flags from './flags'\r\nimport { mount } from \"./render\";\r\nconst {ChildrenFlags} = flags\r\n\r\nexport default function patchChildren(\r\n\tprevChildFlags,\r\n\tnextChildFlags,\r\n\tprevChildren,\r\n\tnextChildren,\r\n\tcontainer\r\n) {\r\n\tswitch (prevChildFlags) {\r\n\t\t// 旧的 children 是单个子节点\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\t// 此时，prevChidren 和 nextChildren 都是 VNode 对象\r\n\t\t\t\t\tpatch(prevChildren, nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tcontainer.removeChild(prevChildren.el)\t\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tcontainer.removeChild(prevChildren.el)\r\n\t\t\t\t\tfor (let i = 0; i <  nextChildren.length; i++) {\r\n\t\t\t\t\t\tmount(nextChildren[i], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\t// 旧的 children 没有子节点\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\tmount(nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tfor (let i = 0; i <  nextChildren.length; i++) {\r\n\t\t\t\t\t\tmount(nextChildren[i], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t\t// 旧的 children 有多个子节点\r\n\t\tdefault: \r\n\t\t\tswitch(nextChildFlags) {\r\n\t\t\t\tcase ChildrenFlags.SINGLE_VNODE: \r\n\t\t\t\t\t// 新的 children 也是单个子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmount(nextChildren, container)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t\t\t// 新的 children 没有子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// 新的 children 有多个子节点\r\n\t\t\t\t\tfor (let i = 0; i < prevChildren.length; i++) {\r\n\t\t\t\t\t\tcontainer.removeChild(prevChildren[i].el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let k = 0; k < nextChildren.length; k++) {\r\n\t\t\t\t\t\tmount(nextChildren[k], container)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t\tbreak\r\n\t}\r\n}","import flags  from './flags'\r\nimport {mount} from './render'\r\nimport patchData from './patchData'\r\nimport patchChildren from './patchChildren'\r\n\r\nconst {VNodeFlags, ChildrenFlags} = flags\r\nexport function patch(prevVNode, nextVNode, container) {\r\n\t// 分别拿到新旧 VNode 的类型，即 flags\r\n\tconst nextFlags = nextVNode.flags\r\n\tconst prevFlags = prevVNode.flags\r\n  \r\n\t// 检查新旧 VNode 的类型是否相同，如果类型不同，则直接调用 replaceVNode 函数替换 VNode\r\n\t// 如果新旧 VNode 的类型相同，则根据不同的类型调用不同的比对函数\r\n\tif (prevFlags !== nextFlags) {\r\n\t  replaceVNode(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.ELEMENT) {\r\n\t  patchElement(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.COMPONENT) {\r\n\t  patchComponent(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.TEXT) {\r\n\t  patchText(prevVNode, nextVNode)\r\n\t} else if (nextFlags & VNodeFlags.FRAGMENT) {\r\n\t  patchFragment(prevVNode, nextVNode, container)\r\n\t} else if (nextFlags & VNodeFlags.PORTAL) {\r\n\t  patchPortal(prevVNode, nextVNode)\r\n\t}\r\n}\r\n\r\n// 替换 VNode\r\nfunction replaceVNode(prevVNode, nextVNode, container) {\r\n\t// 将旧的 VNode 所渲染的 DOM 从容器中移除\r\n\tcontainer.removeChild(prevVNode.el)\r\n\t// 再把新的 VNode 挂载到容器上\r\n\tmount(nextVNode, container)\r\n}\r\n\r\nfunction patchElement(prevVNode, nextVNode, container) {\r\n\t// 如果新的 VNode 描述的是不同的标签，则调用 replaceVNode 函数，使用新的 VNode 替换旧的 VNode\r\n\tif (prevVNode.tag !== nextVNode.tag) {\r\n\t\treplaceVNode(prevVNode, nextVNode, container)\r\n\t\treturn\r\n\t}\r\n\t// 拿到 el 元素，注意这时要让 nextVNode.el 也引用该元素 \r\n\tconst el = (nextVNode.el = prevVNode.el)\r\n\t// 拿到新旧 VNodeData\r\n\tconst prevData = prevVNode.data\r\n\tconst nextData = nextVNode.data\r\n\r\n\tif (nextData) {\r\n\t\t// 遍历新的 VNodeData ，将旧值和新值传递给 patchData函数\r\n\t\tfor (let key in nextData) {\r\n\t\t\tconst prevValue = prevData[key]\r\n\t\t\tconst nextValue = nextData[key]\r\n\t\t\tpatchData(el, key, prevValue, nextValue)\r\n\t\t}\r\n\t}\r\n\r\n\tif (prevData) {\r\n\t\t// 遍历旧的 VNodeData，将不存在与新的 VNodeData 中的数据移除\r\n\t\tfor (let key in prevData) {\r\n\t\t\tconst prevValue = prevData[key]\r\n\t\t\tif (prevValue && !nextData.hasOwnProperty(key)) {\r\n\t\t\t\t// 第四个参数为null代表移除数据\r\n\t\t\t\tpatchData(el, key, prevValue, null)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 调用 patchChildren 函数递归更新子节点\r\n\tpatchChildren(\r\n\t\tprevVNode.childFlags, // 旧的 VNode 子节点类型\r\n\t\tnextVNode.childFlags, // 新的 VNode 子节点类型\r\n\t\tprevVNode.children,   // 旧的 VNode 子节点\r\n\t\tnextVNode.children,   // 新的 VNode 子节点\r\n\t\tel                    // 当前标签元素，即这些子节点的父节点\r\n\t)\r\n}\r\n\r\n// patchText\r\nfunction patchText(prevVNode, nextVNode) {\r\n\t// 拿到文本元素el, 同时让 nextVNode.el 指向该文本元素\r\n\tconst el = (nextVNode.el = prevVNode.el)\r\n\t// 只有当新旧文本内容不一致时才有必要更新\r\n\tif (nextVNode.children !== prevVNode.children) {\r\n\t\tel.nodeValue = nextVNode.children\r\n\t}\r\n}\r\n\r\nfunction patchFragment(prevVNode, nextVNode, container) {\r\n\t// 直接调用 patchChildren 函数更新 新旧节点的子节点即可\r\n\tpatchChildren(\r\n\t\tprevVNode.childFlags, \r\n\t\tnextVNode.childFlags,\r\n\t\tprevVNode.children,\r\n\t\tnextVNode.children,\r\n\t\tcontainer\r\n\t)\r\n\r\n\t// 如上高亮代码所示，我们通过检查新的片段的 children 类型，如果新的片段的 children 类型是单个子节点，则意味着其 vnode.children 属性的值就是 VNode 对象，\r\n\t// 所以直接将 nextVNode.children.el 赋值给 nextVNode.el 即可。如果新的片段没有子节点，我们知道对于没有子节点的片段我们会使用一个空的文本节点占位，\r\n\t// 而 prevVNode.el 属性引用的就是该空文本节点，所以我们直接通过旧片段的 prevVNode.el 拿到该空文本元素并赋值给新片段的 nextVNode.el 即可。\r\n\t// 如果新的片段的类型是多个子节点，则 nextVNode.children 是一个 VNode 数组，我们会让新片段的 nextVNode.el 属性引用数组中的第一个元素。\r\n\t// 实际上这段逻辑与我们在 mountFragment 函数中所实现的逻辑是一致的。\r\n\tswitch (nextVNode.childFlags) {\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tnextVNode.el = nextVNode.children.el\r\n\t\t\tbreak\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\tnextVNode.el = prevVNode.el\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tnextVNode.el = nextVNode.children[0].el\r\n\t}\r\n}","import flags from \"./flags\";\r\nimport { patch } from \"./patch\";\r\nconst { VNodeFlags, ChildrenFlags } = flags;\r\nimport { createTextVNode } from './h'\r\n\r\nexport function render(vnode, container) {\r\n  const prevVNode = container.vnode;\r\n  if (prevVNode == null) {\r\n    if (vnode) {\r\n      // 没有旧的 VNode，只有新的 VNode。使用 `mount` 函数挂载全新的 VNode\r\n      mount(vnode, container);\r\n      // 将新的 VNode 添加到 container.vnode 属性下，这样下一次渲染时旧的 VNode就存在了\r\n      container.vnode = vnode;\r\n    }\r\n  } else {\r\n    if (vnode) {\r\n      // 有旧的 VNode，也有新的 VNode。则调用 `patch` 函数打补丁\r\n      patch(prevVNode, vnode, container);\r\n      // 更新 container.vnode\r\n      container.vnode = vnode;\r\n    } else {\r\n      // 有旧的 VNode 但是没有新的 VNode，这说明应该移除 DOM,在浏览器中可以使用 removeChild函数。\r\n      container.removeChild(prevVNode.el);\r\n      container.vnode = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport function mount(vnode, container, isSVG) {\r\n  const { flags } = vnode;\r\n  if (flags & VNodeFlags.ELEMENT_HTML) {\r\n    // 挂载普通标签\r\n    mountElement(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.COMPONENT) {\r\n    // 挂载组件\r\n    mountComponent(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.TEXT) {\r\n    // 挂载存文本\r\n    mountText(vnode, container);\r\n  } else if (flags & VNodeFlags.FRAGMENT) {\r\n    // 挂载Fragment\r\n    mountFragment(vnode, container, isSVG);\r\n  } else if (flags & VNodeFlags.PORTAL) {\r\n    // 挂载 Portal\r\n    mountPortal(vnode, container, isSVG);\r\n  }\r\n}\r\n\r\n// 处理VNodeData中除 class 和 style 之外的全部数据，当然也要排除 VNodeData中的target属性，因为它只适用于 Portal\r\nconst domPropsRE = /\\[A-Z]|^(?:value|checked|slected|muted)$/;\r\n\r\nfunction mountElement(vnode, container, isSVG) {\r\n  // 注：运算符优先级  逻辑或 5 (||)从左到右  按位与 9(&) 从左到右\r\n\r\n  // 4、处理SVG标签\r\n  isSVG = isSVG || vnode.flags & VNodeFlags.ELEMENT_SVG;\r\n  const el = isSVG\r\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", vnode.tag)\r\n    : document.createElement(vnode.tag);\r\n  vnode.el = el; // 1、VNode渲染成真实DOM之后，引用真实DOM\r\n  // 拿到 VNodeData\r\n  const data = vnode.data;\r\n  if (data) {\r\n    // 如果data存在，则遍历   2、将VNodeData应用到真实DOM元素上\r\n    for (let key in data) {\r\n      // key可能是class、style、on等等\r\n      switch (key) {\r\n        case \"style\":\r\n          // 如果 key 的值是 style，说明是内联样式，逐个将样式规则应用到 el\r\n          for (let k in data.style) {\r\n            el.style[k] = data.style[k];\r\n          }\r\n          break;\r\n        case \"class\":\r\n          el.className = dynamicClass(data[key]);\r\n          break;\r\n        default:\r\n          // 事件处理\r\n          if (key[0] === \"o\" && key[1] === \"n\") {\r\n            el.addEventListener(key.slice(2), data[key]);\r\n            // 注：如此一来，所有以 'on' 开头的属性都被判定为事件\r\n          } else if (domPropsRE.test(key)) {\r\n            // 当做 DOM Prop处理\r\n            el[key] = data[key];\r\n          } else {\r\n            // 当作 Attr 处理\r\n            el.setAttribute(key, data[key]);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 3、继续挂载子节点\r\n  // 拿到children 和 childFlags\r\n  const childFlags = vnode.childFlags;\r\n  const children = vnode.children;\r\n  // 检测如果没有子节点则无需递归挂载\r\n  if (childFlags !== ChildrenFlags.NO_CHILDREN) {\r\n    if (childFlags & ChildrenFlags.SINGLE_VNODE) {\r\n      // 单个子节点则调用mount挂载\r\n      mount(children, el, isSVG); // 把isSvg传递下去，方便后续判断渲染svg里面circle等元素tag不等于svg时渲染svg标签\r\n    } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\r\n      // 如果是多个子节点，则遍历并调用 mount 函数挂载\r\n      for (let i = 0; i < children.length; i++) {\r\n        mount(children[i], el, isSVG);\r\n      }\r\n    }\r\n  }\r\n  // 处理svg标签\r\n  container.appendChild(el); //\r\n}\r\n\r\n// 挂载组件\r\nfunction mountComponent(vnode, container, isSVG) {\r\n\tif (vnode.flags & VNodeFlags.COMPONENT_STATEFUL) {\r\n\t\tmountStatefulComponent(vnode, container, isSVG)\r\n\t} else {\r\n\t\tmountFunctionalComponent(vnode, container, isSVG)\r\n\t}\r\n}\r\n// 挂载有状态组件\r\nfunction mountStatefulComponent(vnode, container, isSVG) {\r\n\t// 1、创建组件实例\r\n\tconst instance = new vnode.tag\r\n\t// 2、获取组件产出的 Vnode\r\n\tinstance.$vnode = instance.render()\r\n\t// 3、mount挂载\r\n\tmount(instance.$vnode, container, isSVG)\r\n\t// 4、让组件实例的 $el 属性和 vnode.el 属性的值引用组件的根DOM元素\r\n\tinstance.$el = vnode.el = instance.$vnode.el\r\n}\r\n\r\n// 挂载函数式组件\r\nfunction mountFunctionalComponent(vnode, container, isSVG) {\r\n\t// 获取vnode\r\n\tconst $vnode = vnode.tag()\r\n\t// 挂载\r\n\tmount($vnode, container, isSVG)\r\n\t// el元素引用该组件的根元素\r\n\tvnode.el = $vnode.el\r\n}\r\n\r\n// 挂载纯文本\r\nfunction mountText(vnode, container){\r\n\tconst el = document.createTextNode(vnode.children)\r\n\tvnode.el = el\r\n\tcontainer.appendChild(el)\r\n}\r\n\r\n// 挂载Fragment\r\nfunction mountFragment(vnode, container, isSVG) {\r\n\t// 拿到children 和 childFlags\r\n\tconst {children, childFlags} = vnode\r\n\tswitch (childFlags) {\r\n\t\tcase ChildrenFlags.SINGLE_VNODE:\r\n\t\t\tmount(children, container, isSVG)\r\n\t\t\tvnode.el = children.el\r\n\t\t\tbreak\r\n\t\tcase ChildrenFlags.NO_CHILDREN:\r\n\t\t\t// 没有子节点，等价于挂载空片段，会创建一个空的文本节点占位\r\n\t\t\tconst placeholder = createTextVNode('')\r\n\t\t\tmountText(placeholder, container)\r\n\t\t\tvnode.el = placeholder.el\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\t// 多个子节点，遍历挂载\r\n\t\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\t\tmount(children[i], container, isSVG)\r\n\t\t\t}\r\n\t\t\tvnode.el = children[0].el\r\n\t\t\tbreak\r\n\t}\r\n}\r\n\r\n// 挂载 Portal\r\nfunction mountPortal(vnode, container, isSVG) {\r\n\tconst {tag, children, childFlags} = vnode\r\n\t// 获取挂载点\r\n\tconst target = typeof tag === 'string' ? document.querySelector(tag) : tag\r\n\r\n\tif (childFlags & childFlags.SINGLE_VNODE) {\r\n\t\t// 将children挂载到target上，而非container\r\n\t\tmount(children, target)\r\n\t} else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\r\n\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\tmount(children[i], target)\r\n\t\t}\r\n\t}\r\n\t// 占位的空文本节点\r\n\tconst placeholder = createTextVNode('')\r\n\t// 将该节点挂载到 container 中\r\n\tmountText(placeholder, container, null)\r\n\t// el属性引用该节点\r\n\tvnode.el = placeholder.el\r\n\r\n}\r\n\r\nfunction dynamicClass(className) {\r\n  if (typeof className === \"string\") {\r\n    return className;\r\n  }\r\n  if (typeof className === \"object\") {\r\n    if (Array.isArray(className)) {\r\n      let str = \"\";\r\n      for (let i = 0; i < className.length; i++) {\r\n        if (typeof className[i] === \"string\") {\r\n          str += className[i] + \" \";\r\n        } else if (typeof className[i] === \"object\") {\r\n          str += dynamicClass(className[i]);\r\n        }\r\n      }\r\n      return str || \"\";\r\n    } else {\r\n      let str = \"\";\r\n      for (let key in className) {\r\n        if (typeof className[key] === \"boolean\" && className[key]) {\r\n          str += key + \" \";\r\n        } else if (typeof className[key] === \"object\") {\r\n          str += dynamicClass(className[key]);\r\n        }\r\n      }\r\n      return str || \"\";\r\n    }\r\n  }\r\n  return \"\";\r\n}\r\n\r\nexport default {\r\n  render\r\n};\r\n","import \"./styles.css\";\nimport { h } from \"./h\";\nimport { render } from \"./render\";\nimport { Fragment } from './Fragment'\nimport { Portal } from './Portal'\nfunction handler() {\n  alert(\"click\");\n}\n\n// const elementVnode = h(\n// \t\"div\", \n// \t{\n//   \t\tstyle: {\n//     \t\twidth: \"100px\",\n//     \t\theight: \"100px\",\n//     \t\tbackgroundColor: \"red\"\n//   \t\t},\n//   \t\t// 点击事件\n//   \t\tonclick: handler,\n// \t},\n\t// h(\n\t// \tFragment, null, \n\t// \t[\n\t// \t\th('h1', {\n\t// \t\t\tstyle: {\n\t// \t\t\t\tfontSize: '12px',\n\t// \t\t\t\tcolor: 'aqua'\n\t// \t\t\t}\n\t// \t\t}, '我是标题1......'),\n\t// \t\th('h2', {\n\t// \t\t\tstyle: {\n\t// \t\t\t\tfontSize: '20px',\n\t// \t\t\t\tcolor: '#6cf',\n\t// \t\t\t\tfontStyle: 'itatic'\n\t// \t\t\t}\n\t// \t\t}, '我是标题2......')\n\t// \t]\n\t// )\n// );\n// Portal\n// const elementVnode = h(\n// \t'div',\n// \t{\n// \t\tstyle: {\n// \t\t\twidth: '100px',\n// \t\t\theight: '100px',\n// \t\t\tbackgroundColor: 'aqua'\n// \t\t},\n// \t\tonclick: handler\n// \t},\n// \th(\n// \tPortal, { target: '#portal-box' }, \n// \t[\n// \t\th('span', null, '我是标题1......'),\n// \t\th('span', null, '我是标题2......')\n// \t])\n// )\n\n// 有状态组件\nclass MyComponent{\n\trender(){\n\t\treturn h(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tbackground: 'green'\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\th('span', null, '我是组件标题1·······'),\n\t\t\t\th('span', null, '我是组件标题2······')\n\t\t\t]\n\t\t)\n\t}\n}\n// 函数式组件\nfunction MyFunctionalComponent(){\n\treturn h(\n\t\t'div',\n\t\t{\n\t\t\tstyle: {\n\t\t\t\tbackground: 'aqua',\n\t\t\t\theight: '100px',\n\t\t\t\twidth: '100px',\n\t\t\t\tborderRadius: '50px',\n\t\t\t\ttextAlign: 'center'\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\th('span', null, '我是组件标题1······'),\n\t\t\th('span', null, '我是组件标题2······')\n\t\t]\n\t)\n}\nconst compVnode = h(MyComponent)\n\nconst funcVnode = h(MyFunctionalComponent)\n\n// render(funcVnode, document.getElementById(\"app\") || document.body)\n// 旧的 VNode\n// const prevVNode = h('div', {\n//   style: {\n//     width: '100px',\n//     height: '100px',\n//     backgroundColor: 'red'\n//   },\n//   onclick: handler,\n//   data: '1234'\n// },\n// h('p', {\n// \tstyle: {\n// \t  height: '50px',\n// \t  width: '50px'\n// \t}\n// })\n// )\n\n// 新的 VNode\n// const nextVNode = h('div', {\n//   style: {\n//     width: '100px',\n//     height: '100px',\n//     border: '1px solid green'\n//   },\n//   data: '456'\n// },\n// h('p', {\n// \tstyle: {\n// \t  height: '50px',\n// \t  width: '50px',\n// \t  background: 'aqua'\n// \t}\n//   })\n// )\n\n// 旧的 VNode 一个子节点\n// const prevVNode = h('div', null, h('p', null, '只有一个子节点'))\n\n// 新的 VNode 多个子节点\n// const nextVNode = h('div', null, [\n//   h('p', null, '子节点 1'),\n//   h('p', null, '子节点 2')\n// ])\n\n\n// patchText\n// const prevVNode = h('p', null, '旧文本')\n\n// 新的 VNode\n// const nextVNode = h('p', null, '新文本')\n\n\n\n/**** patch fragment ****/\n// 旧的 VNode\nconst prevVNode = h(Fragment, null, [\n\th('p', null, '旧片段子节点 1'),\n\th('p', null, '旧片段子节点 2')\n])\n  \n// 新的 VNode\nconst nextVNode = h(Fragment, null, [\n\th('p', null, '新片段子节点 1'),\n\th('p', null, '新片段子节点 2')\n])\n\nrender(prevVNode, document.getElementById('app'))\n\n// 2秒后更新\nsetTimeout(() => {\n  render(nextVNode, document.getElementById('app'))\n}, 2000)\n\n\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}